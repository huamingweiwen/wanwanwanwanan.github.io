var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(n,a){function s(t){try{h(r.next(t))}catch(e){a(e)}}function o(t){try{h(r["throw"](t))}catch(e){a(e)}}function h(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(s,o)}h((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,a&&(s=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,a=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){h.label=i[1];break}if(6===i[0]&&h.label<s[1]){h.label=s[1],s=i;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(i);break}s[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(r){i=[6,r],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,a,s,o,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},barball;!function(t){var e=function(t){function e(e,i,r,n){var a=t.call(this)||this;return a.LR_Increment=1,a.UD_Increment=1,a.speed=25,a.bmp=new egret.Bitmap(e),a.direction=i,r&&(a.bmp.width=r,a.bmp.height=n),a.addChild(a.bmp),a}return __extends(e,t),Object.defineProperty(e.prototype,"CenterX",{get:function(){return this.x+this.bmp.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CenterY",{get:function(){return this.y+this.bmp.height/2},enumerable:!0,configurable:!0}),e.prototype.setDirection=function(t){this.direction=t},e.prototype.getDirection=function(){return this.direction},e.prototype.setTouchObject=function(t){this.touchObject=t},e.prototype.getTouchObject=function(){return this.touchObject},e.prototype.setStageType=function(t){this.stageType=t},e.prototype.getStageType=function(){return this.stageType},e.prototype.setStarType=function(t){this.starType=t},e.prototype.getStarType=function(){return this.starType},e.prototype.move=function(){"Right-Down"==this.direction?(this.x=this.x+1,this.y=this.y+1):"Right-Up"==this.direction?(this.x=this.x+1,this.y=this.y-1):"Left-Up"==this.direction?(this.x=this.x-1,this.y=this.y-1):"Left-Down"==this.direction&&(this.x=this.x-1,this.y=this.y+1)},e.prototype.changeDir=function(){"Right-Up"==this.direction&&"Stage"==this.touchObject&&"Stage-Right"==this.stageType?this.setDirection("Left-Up"):"Right-Up"==this.direction&&"Stage"==this.touchObject&&"Stage-Top"==this.stageType?this.setDirection("Right-Down"):"Left-Up"==this.direction&&"Stage"==this.touchObject&&"Stage-Left"==this.stageType?this.setDirection("Right-Up"):"Left-Up"==this.direction&&"Stage"==this.touchObject&&"Stage-Top"==this.stageType?this.setDirection("Left-Down"):"Right-Down"==this.direction&&"Stage"==this.touchObject&&"Stage-Right"==this.stageType?this.setDirection("Left-Down"):"Right-Down"==this.direction&&"Stage"==this.touchObject&&"Stage-Bottom"==this.stageType?this.setDirection("Right-Up"):"Left-Down"==this.direction&&"Stage"==this.touchObject&&"Stage-Left"==this.stageType?this.setDirection("Right-Down"):"Left-Down"==this.direction&&"Stage"==this.touchObject&&"Stage-Bottom"==this.stageType?this.setDirection("Left-Up"):"Left-Down"==this.direction&&"Bar"==this.touchObject?this.setDirection("Left-Up"):"Right-Down"==this.direction&&"Bar"==this.touchObject?this.setDirection("Right-Up"):"Right-Up"==this.direction&&"Star"==this.touchObject&&"Star-Left"==this.starType?this.setDirection("Left-Up"):"Right-Up"==this.direction&&"Star"==this.touchObject&&"Star-Bottom"==this.starType?this.setDirection("Right-Down"):"Left-Up"==this.direction&&"Star"==this.touchObject&&"Star-Bottom"==this.starType?this.setDirection("Left-Down"):"Left-Up"==this.direction&&"Star"==this.touchObject&&"Star-Right"==this.starType?this.setDirection("Right-Up"):"Left-Down"==this.direction&&"Star"==this.touchObject&&"Star-Top"==this.starType?this.setDirection("Left-Up"):"Left-Down"==this.direction&&"Star"==this.touchObject&&"Star-Right"==this.starType?this.setDirection("Right-Down"):"Right-Down"==this.direction&&"Star"==this.touchObject&&"Star-Top"==this.starType?this.setDirection("Right-Up"):"Right-Down"==this.direction&&"Star"==this.touchObject&&"Star-Left"==this.starType&&this.setDirection("Left_Down")},e}(egret.DisplayObjectContainer);t.Ball=e,__reflect(e.prototype,"barball.Ball")}(barball||(barball={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function r(r){e.call(i,r,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?r(n):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),this.startAnimation(t),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=this.loadingView=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("BallBall",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var r=new eui.Theme("resource/default.thm.json",t.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t.isThemeLoadEnd=!0,console.log("onThemeLoadComplete !"),e()},t)})},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this)},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,console.log("onThemeLoadComplete !")},e.prototype.onResourceLoadComplete=function(t){"PanelUI"==t.groupName?console.log("onResourceLoadComplete PanelUI !"):"loading"==t.groupName?console.log("onResourceLoadComplete loading !"):(console.log("onResourceLoadComplete loading !  -- "+t.groupName),SoundManager.Instance().MainBGM||RES.getResAsync("bgm_mp3",function(t,e){SoundManager.Instance().MainBGM=t,SoundManager.Instance().bBGMComplete=!0,SoundManager.Instance().PlayMainBGM()},this),SoundManager.Instance().BtnEffect||RES.getResAsync("BtnEffect_mp3",function(t,e){SoundManager.Instance().BtnEffect=t,SoundManager.Instance().bEffectComplete=!0},this))},e.prototype.createGameScene=function(){var t=new barball.GameContainer;this.addChild(t),this.contains(this.loadingView)&&this.removeChild(this.loadingView)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){return void console.log(t)},e.prototype.changeDescription=function(t,e){t.removeChildren();for(var i=0,r=0;r<e.length;r++){var n=e[r],a=new egret.TextField;a.x=i,a.anchorOffsetX=a.anchorOffsetY=0,a.textColor=parseInt(n.textColor),a.text=n.text,a.size=40,t.addChild(a),i+=a.width}},e}(eui.UILayer);__reflect(Main.prototype,"Main");var MainOld=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),this.startAnimation(t),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return i.sent(),this.stage.removeChild(t),[3,5];case 4:return e=i.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var r=new eui.Theme("resource/default.thm.json",t.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){var t=this.createBitmapByName("bg_jpg");this.addChild(t);var e=this.stage.stageWidth,i=this.stage.stageHeight;t.width=e,t.height=i;var r=new egret.Shape;r.graphics.beginFill(0,.5),r.graphics.drawRect(0,0,e,172),r.graphics.endFill(),r.y=33,this.addChild(r);var n=this.createBitmapByName("egret_icon_png");this.addChild(n),n.x=26,n.y=33;var a=new egret.Shape;a.graphics.lineStyle(2,16777215),a.graphics.moveTo(0,0),a.graphics.lineTo(0,117),a.graphics.endFill(),a.x=172,a.y=61,this.addChild(a);var s=new egret.TextField;s.textColor=16777215,s.width=e-172,s.textAlign="center",s.text="Hello Egret",s.size=24,s.x=172,s.y=80,this.addChild(s);var o=new egret.TextField;this.addChild(o),o.alpha=0,o.width=e-172,o.textAlign=egret.HorizontalAlign.CENTER,o.size=24,o.textColor=16777215,o.x=172,o.y=135,this.textfield=o;var h=new eui.Button;h.label="Click!",h.horizontalCenter=0,h.verticalCenter=0,this.addChild(h),h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,r=t.map(function(t){return i.parse(t)}),n=this.textfield,a=-1,s=function(){a++,a>=r.length&&(a=0);var t=r[a];n.textFlow=t;var i=egret.Tween.get(n);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(s,e)};s()},e.prototype.onButtonClick=function(t){var e=new eui.Panel;e.title="Title",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e)},e}(eui.UILayer);__reflect(MainOld.prototype,"MainOld");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var SoundManager=function(){function t(){this.bActiveBGM=!0,this.bActiveEffect=!0,this.bBGMComplete=!1,this.bEffectComplete=!1}return t.Instance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.onLoadComplete=function(){},t.prototype.PlayBtnEffect=function(t,e){this.bActiveEffect&&(e?this.BtnEffect.play(t,e):this.BtnEffect.play())},t.prototype.PlayBombEffect=function(t,e){this.bActiveEffect&&(e?this.BombEffect.play(t,e):this.BombEffect.play())},t.prototype.PlayMainBGM=function(t,e){this.bActiveBGM&&(this.MainBGMSoundChannel&&this.MainBGMSoundChannel.stop(),e?this.MainBGMSoundChannel=this.MainBGM.play(t,e):this.MainBGMSoundChannel=this.MainBGM.play())},t.prototype.PlayFubenBGM=function(t,e){this.bActiveBGM&&(this.MainBGMSoundChannel.stop(),e?this.MainBGMSoundChannel=this.FubenBGM.play(t,e):this.MainBGMSoundChannel=this.FubenBGM.play())},t.prototype.ChangeBGMState=function(t,e,i){!this.bActiveBGM&&t?i?this.MainBGMSoundChannel=this.MainBGM.play(e,i):this.MainBGMSoundChannel=this.MainBGM.play():this.bActiveBGM&&!t&&this.MainBGMSoundChannel.stop(),this.bActiveBGM=t},t.prototype.ChangeEffectState=function(t,e,i){this.bActiveEffect=t},t._instance=null,t}();__reflect(SoundManager.prototype,"SoundManager");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,r){function n(t){e.call(r,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(r))}var s=this;"undefined"!=typeof generateEUI?egret.callLater(function(){e.call(r,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.bin",function(t,i){window.JSONParseClass.setData(t),n(t),egret.callLater(function(){e.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_BIN):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var UpNumberItem=function(t){function e(e,i,r,n,a,s,o,h,l){var c=t.call(this)||this;return c.Bold=!0,c.Key=e,c.TextColor=i,c.Content=r,c.DelayTime=n,c.StartPoint=a,c.EndPoint=s,o&&(c.Size=o),0==l&&(c.Bold=l),h&&(c.Handle=h),c.CreatLabel(),c}return __extends(e,t),e.prototype.CreatLabel=function(){this.Label=new eui.Label,this.Label.text=this.Content,this.Label.textColor=this.TextColor,this.Size&&(this.Label.size=this.Size),this.Label.bold=this.Bold,this.Label.stroke=1,this.Label.strokeColor=0,this.addChild(this.Label),this.Label.alpha=0,this.x=this.StartPoint.x,this.y=this.StartPoint.y,this.touchChildren=!1},e.prototype.StartAni=function(){var t=this;egret.Tween.get(this).wait(this.DelayTime).call(function(){t.Label.alpha=1,egret.Tween.get(t).wait(200).to({scaleX:1.2,scaleY:1.2,x:t.EndPoint.x,y:t.EndPoint.y},600).to({alpha:0},500).call(function(){t.Handle&&t.Handle(t.Key)})})},e.prototype.FinishAni=function(){this.Handle&&this.Handle(this.Key)},e}(egret.DisplayObjectContainer);__reflect(UpNumberItem.prototype,"UpNumberItem");var UpNumberItemsContainer=function(t){function e(){var e=t.call(this)||this;return e.UpNumberItems={},e.UpNumberGroupsArr=new Array,e.bCanPlayLevelUpNumberItem=!0,e.InParentDex=0,e}return __extends(e,t),e.prototype.CreateUpNumberItem=function(t,e,i,r,n,a,s){var o=new Array;this.parent&&(this.InParentDex=this.parent.getChildIndex(this));var h=a?a:(new Date).toString();this.UpNumberItems[h]=new UpNumberItem(h,e,t,100,r,n,i,this.MoveOneLevelUpNumberItem.bind(this),s),this.addChild(this.UpNumberItems[h]),o.push(this.UpNumberItems[h]),this.UpNumberGroupsArr.push(o),this.PlayUpNumberItem(),this.touchChildren=!1},e.prototype.PlayUpNumberItem=function(){var t=this;if(this.bCanPlayLevelUpNumberItem&&this.UpNumberGroupsArr.length>0){this.parent&&this.parent.setChildIndex(this,this.InParentDex),this.bCanPlayLevelUpNumberItem=!1;for(var e=0;e<this.UpNumberGroupsArr[0].length;e++)this.UpNumberGroupsArr[0][e].StartAni();var i=500*this.UpNumberGroupsArr[0].length;this.UpNumberGroupsArr.splice(0,1),egret.Tween.get(this).wait(i).call(function(){t.bCanPlayLevelUpNumberItem=!0,t.UpNumberGroupsArr.length>0&&t.PlayUpNumberItem()})}},e.prototype.CreateFastUpNumberItem=function(t,e,i,r,n,a){var s=new Array;this.parent&&(this.InParentDex=this.parent.getChildIndex(this));var o=a?a:(new Date).toString();this.UpNumberItems[o]=new UpNumberItem(o,e,t,100,r,n,i,this.MoveOneLevelUpNumberItem.bind(this)),this.addChild(this.UpNumberItems[o]),s.push(this.UpNumberItems[o]),this.UpNumberGroupsArr.push(s),this.PlayFastUpNumberItem(),this.touchChildren=!1},e.prototype.PlayFastUpNumberItem=function(){if(this.UpNumberGroupsArr.length>0){this.parent&&this.parent.setChildIndex(this,this.InParentDex);for(var t=0;t<this.UpNumberGroupsArr[0].length;t++)this.UpNumberGroupsArr[0][t].StartAni();this.UpNumberGroupsArr.splice(0,1),this.UpNumberGroupsArr.length>0&&this.PlayFastUpNumberItem()}},e.prototype.MoveOneLevelUpNumberItem=function(t){this.UpNumberItems[t]&&this.contains(this.UpNumberItems[t])&&(this.removeChild(this.UpNumberItems[t]),this.UpNumberItems[t]=null)},e.prototype.ClearItems=function(){this.removeChildren(),this.UpNumberItems={},this.UpNumberGroupsArr=new Array},e}(egret.DisplayObjectContainer);__reflect(UpNumberItemsContainer.prototype,"UpNumberItemsContainer");var Point_2D=function(){function t(t,e,i){this.x=t,this.y=e,this.func_Handle=i}return t}();__reflect(Point_2D.prototype,"Point_2D");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var barball;!function(t){var e=function(t){function e(e,i,r){var n=t.call(this)||this;return n.bmp=new egret.Bitmap(e),i&&(n.bmp.width=i,n.bmp.height=r),n.addChild(n.bmp),n}return __extends(e,t),e}(egret.DisplayObjectContainer);t.Bar=e,__reflect(e.prototype,"barball.Bar")}(barball||(barball={}));var barball;!function(t){var e=function(e){function i(){var i=e.call(this)||this,r=i.graphics;r.beginFill(0,.5),r.drawRect(0,0,1080,1800),r.endFill(),i.NameBG=t.createBitmapByName("BlackShape_png"),i.NameBG.name="NameBG",i.NameBG.scale9Grid=new egret.Rectangle(1,1,8,8),i.NameBG.touchEnabled=!0,i.NameBG.width=800,i.NameBG.height=500,i.NameBG.x=(1080-i.NameBG.width)/2,i.NameBG.y=(1800-i.NameBG.height)/2-200,i.addChild(i.NameBG),i.txt1=new egret.TextField,i.txt1.width=800,i.txt1.bold=!0,i.txt1.height=400,i.txt1.textAlign="center",i.txt1.textColor=16711680,i.txt1.stroke=1,i.txt1.strokeColor=16777215,i.txt1.size=100,i.txt1.x=(1080-i.txt1.width)/2,i.txt1.y=570;var n="Lemon工作室";i.txt1.text=n,i.addChild(i.txt1),i.txt2=new egret.TextField,i.txt2.width=800,i.txt2.bold=!0,i.txt2.height=400,i.txt2.textAlign="center",i.txt2.textColor=16777215,i.txt2.size=70,i.txt2.x=(1080-i.txt1.width)/2-140,i.txt2.y=700;var a="贺学荣";i.txt2.text=a,i.addChild(i.txt2),i.txt3=new egret.TextField,i.txt3.width=800,i.txt3.bold=!0,i.txt3.height=400,i.txt3.textAlign="center",i.txt3.textColor=16777215,i.txt3.size=70,i.txt3.x=(1080-i.txt3.width)/2+140,i.txt3.y=700;var s="不重要A";i.txt3.text=s,i.addChild(i.txt3),i.txt4=new egret.TextField,i.txt4.width=800,i.txt4.bold=!0,i.txt4.height=400,i.txt4.textAlign="center",i.txt4.textColor=16777215,i.txt4.size=70,i.txt4.x=(1080-i.txt4.width)/2-105,i.txt4.y=800;var o="不重要B";return i.txt4.text=o,i.addChild(i.txt4),i.touchChildren=!0,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,i.Close,i),i}return __extends(i,e),i.prototype.Close=function(){t.GameContainer.instance_.CloseDeveloperPanel()},i}(egret.Sprite);t.DeveloperPanel=e,__reflect(e.prototype,"barball.DeveloperPanel")}(barball||(barball={}));var barball;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.scoreNum=0,t.CrossTimeScore=0,t.BottomBallY=0,t.removeStar=-1,t.levelStage=6,t.bISGameOver=!1,i.instance_=t,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(i,e),i.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.createGameScene(),this.scorePanel=new t.ScorePanel,this.scorePanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GameAgain,this),this.createStartPanel()},i.prototype.createStartPanel=function(){this.startPanel=new t.StartPanel,this.addChild(this.startPanel)},i.prototype.createDeveloperPanel=function(){this.developerPanel=new t.DeveloperPanel,this.addChild(this.developerPanel)},i.prototype.createGameScene=function(){this.starArray=[],this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight,this.backGround=t.createBitmapByName("BackGround_png"),this.backGround.name="backGround",this.addChild(this.backGround),this.backGround.touchEnabled=!0,this.backGround.width=this.stage.stageWidth,this.backGround.height=this.stage.stageHeight,this.bar=new t.Bar(RES.getRes("bar_png"),224,40),this.bar.name="bar",this.bar.x=this.stage.stageWidth/2-this.bar.width/2,this.bar.y=4*this.stage.stageHeight/5,this.addChild(this.bar),this.ball=new t.Ball(RES.getRes("qiu1_png"),"Right-Up",86,96),this.ball.name="ball",this.ball.x=this.bar.x+this.bar.width/2-this.ball.width/2,this.ball.y=this.bar.y-this.ball.height,this.addChild(this.ball);for(var e=0;e<1*this.levelStage;e++)for(var i=7-e%2,r=0;i>r;r++){var n=Math.floor(2+4*Math.random()),a=new t.Star(RES.getRes("qiu"+n+"_png"),134,151);a.name="star_"+e+"_"+r+"_"+n,a.x=40+144*r+e%2*67,a.y=50+161*e,this.starArray.push(a),this.addChild(a)}this.BottomBallY=855,this.scoreBG=t.createBitmapByName("scoreBG_png"),this.scoreBG.name="scoreBG",this.addChild(this.scoreBG),this.scoreBG.width=300,this.scoreBG.height=105,this.scoreBG.x=100,this.scoreBG.y=4*this.stage.stageHeight/5+100,this.scoreNum=0,this.scoreTxt=new egret.TextField,this.scoreTxt.width=300,this.scoreTxt.bold=!0,this.scoreTxt.height=105,this.scoreTxt.textAlign="center",this.scoreTxt.verticalAlign="middle",this.scoreTxt.textColor=16777215,this.scoreTxt.size=60,this.scoreTxt.x=this.scoreBG.x,this.scoreTxt.y=this.scoreBG.y,this.scoreTxt.text=""+this.scoreNum,this.addChild(this.scoreTxt),this.UpNumberItemsContainer=new UpNumberItemsContainer,this.addChild(this.UpNumberItemsContainer),this.setChildIndex(this.UpNumberItemsContainer,this.getChildIndex(this.scoreTxt)),this.UpNumberItemsContainer.touchChildren=!1},i.prototype.checkStarLocation=function(t){for(var e=this.starArray.length-1;e>=0;e--)if(t.x<=this.starArray[e].x+this.starArray[e].width&&t.x>=this.starArray[e].x&&t.y>=this.starArray[e].y&&t.y<=this.starArray[e].y+this.starArray[e].height)return!0;return!1},i.prototype.gameStart=function(){this.contains(this.startPanel)&&this.removeChild(this.startPanel),this.removeStarCount=0,this.PlayTime=new Date,this.scorePanel.parent==this&&this.removeChild(this.scorePanel),this.touchEnabled=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)},i.prototype.gameViewUpdate=function(){var t=new Date,e=t.getTime()-i.instance_.PlayTime.getTime();this.CrossTimeScore=Math.floor(e/100),this.scoreTxt.text=""+(this.scoreNum+this.CrossTimeScore);var r=224;r-=10*Math.floor((this.scoreNum+this.CrossTimeScore)/1e3),50>r&&(r=50),this.bar.bmp.width=r,this.ball.speed=25+2*Math.floor((this.scoreNum+this.CrossTimeScore)/1e3);for(var n=0;n<this.ball.speed;n++){if(this.ball.move(),this.ballStageTouch()&&this.ball.changeDir(),this.ballBarTouch())for(this.ball.changeDir();this.EndLineIsNone();){for(var a=this.starArray.length-1;a>=0;a--)this.starArray[a].y+=161;this.AddLine()}if(this.ballStarTouch()){SoundManager.Instance().PlayBtnEffect(0,1),this.removeChild(this.starArray[this.removeStar]),this.starArray[this.removeStar].x=-1,this.starArray[this.removeStar].y=-1,this.removeStarCount=this.removeStarCount+1;var s=this.starArray[this.removeStar].name.split("_")[3],o=100*(parseInt(s)-1);this.scoreNum+=o,this.starArray.splice(this.removeStar,1),this.UpNumberItemsContainer.CreateFastUpNumberItem("+ "+o,15308410,72,new Point_2D(139,1450),new Point_2D(139,1370)),this.scoreTxt.text=""+(this.scoreNum+this.CrossTimeScore),this.ball.changeDir()}if(this.gameStop()){this.bISGameOver=!0,this.removeEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.scorePanel.showScore(this.removeStarCount),this.addChild(this.scorePanel);break}}},i.prototype.AddLine=function(){this.levelStage+=1;for(var e=7-this.levelStage%2,i=0;e>i;i++){var r=Math.floor(2+4*Math.random()),n=new t.Star(RES.getRes("qiu"+r+"_png"),134,151);n.name="star_"+this.levelStage+"_"+i+"_"+r,n.x=40+144*i+this.levelStage%2*67,n.y=50,this.starArray.push(n),this.addChild(n)}},i.prototype.GameAgain=function(){this.bISGameOver=!1,this.removeChildren(),this.startPanel=null,this.scorePanel=null,this.levelStage=6,this.createGameScene(),this.scorePanel=new t.ScorePanel,this.scorePanel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GameAgain,this),this.createStartPanel()},i.prototype.CloseDeveloperPanel=function(){this.contains(this.developerPanel)&&this.removeChild(this.developerPanel)},i.prototype.ballStageTouch=function(){return this.ball.x-.5<=0?(this.ball.setTouchObject("Stage"),this.ball.setStageType("Stage-Left"),!0):this.ball.x+this.ball.width+.5>=this.stageW?(this.ball.setTouchObject("Stage"),this.ball.setStageType("Stage-Right"),!0):this.ball.y<=0?(this.ball.setTouchObject("Stage"),this.ball.setStageType("Stage-Top"),!0):this.ball.y+this.ball.height+.5>=this.stageH?(this.ball.setTouchObject("Stage"),this.ball.setStageType("Stage-Bottom"),!0):!1},i.prototype.ballStarTouch=function(){for(var t=this.starArray.length-1;t>=0;t--)if(-1!=this.starArray[t].x||-1!=this.starArray[t].y){var e=this.ball.CenterX-this.starArray[t].CenterX,i=this.ball.CenterY-this.starArray[t].CenterY,r=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));if(100>=r)return this.ball.y+this.ball.height>=this.starArray[t].y&&("Right-Down"==this.ball.direction||"Left-Down"==this.ball.direction)&&this.ball.x>=this.starArray[t].x&&this.ball.x<=this.starArray[t].x+this.starArray[t].width?(this.removeStar=t,this.ball.setTouchObject("Star"),this.ball.setStarType("Star-Top"),console.log("碰到Star-Top"),!0):this.ball.y<=this.starArray[t].y+this.starArray[t].height&&("Right-Up"==this.ball.direction||"Left-Up"==this.ball.direction)&&this.ball.x>=this.starArray[t].x&&this.ball.x<=this.starArray[t].x+this.starArray[t].width?(this.removeStar=t,this.ball.setTouchObject("Star"),this.ball.setStarType("Star-Bottom"),console.log("碰到Star-Bottom"),!0):this.ball.x+this.ball.width<=this.starArray[t].x&&("Right-Up"==this.ball.direction||"Right-Down"==this.ball.direction)&&this.ball.y>=this.starArray[t].y&&this.ball.y<=this.starArray[t].y+this.starArray[t].height?(this.removeStar=t,this.ball.setTouchObject("Star"),this.ball.setStarType("Star-Left"),console.log("碰到Star-Left"),!0):this.ball.x<=this.starArray[t].x+this.starArray[t].width&&("Left-Up"==this.ball.direction||"Left-Down"==this.ball.direction)&&this.ball.y>=this.starArray[t].y&&this.ball.y<=this.starArray[t].y+this.starArray[t].height?(this.removeStar=t,this.ball.setTouchObject("Star"),this.ball.setStarType("Star-Right"),console.log("碰到Star-Right"),!0):(console.log("球x:"+this.ball.x+"球y:"+this.ball.y+"星x:"+this.starArray[t].x+"星y:"+this.starArray[t].y),!1)}return!1},i.prototype.ballBarTouch=function(){return this.ball.y+this.ball.height+.5>=this.bar.y&&this.ball.x+this.ball.width/2+.5>=this.bar.x&&this.ball.x+this.ball.width/2-.5<=this.bar.x+this.bar.width?(this.ball.setTouchObject("Bar"),!0):!1},i.prototype.EndLineIsNone=function(){for(var t=!0,e=0,i=this.starArray.length-1;i>=0;i--)e<this.starArray[i].y&&(e=this.starArray[i].y),this.starArray[i].y>695&&(t=!1);return this.BottomBallY=e,t},i.prototype.onTouchBegin=function(t){this.bISGameOver||(this.bar.x=t.stageX-this.bar.width/2,this.bar.x+this.bar.width>=this.stageW?this.bar.x=this.stageW-this.bar.width:this.bar.x<0&&(this.bar.x=0),this.bar.y=4*this.stage.stageHeight/5)},i.prototype.onTouchMove=function(t){this.bISGameOver||(this.bar.x=t.stageX-this.bar.width/2,this.bar.x+this.bar.width>=this.stageW?this.bar.x=this.stageW-this.bar.width:this.bar.x<0&&(this.bar.x=0),this.bar.y=4*this.stage.stageHeight/5)},i.prototype.gameStop=function(){return this.removeStarCount==this.starArray.length&&console.log("????"),this.ball.y>=this.bar.y+10?!0:!1},i.instance_=null,i}(egret.DisplayObjectContainer);t.GameContainer=e,__reflect(e.prototype,"barball.GameContainer")}(barball||(barball={}));var barball;!function(t){var e=function(e){function i(){var t=e.call(this)||this,i=t.graphics;return i.beginFill(0,.8),i.drawRect(0,0,1080,1800),i.endFill(),t.txt=new egret.TextField,t.txt.width=500,t.txt.bold=!0,t.txt.height=250,t.txt.textAlign="center",t.txt.textColor=16777215,t.txt.size=70,t.txt.x=290,t.txt.y=570,t.addChild(t.txt),t.touchChildren=!0,t.touchEnabled=!0,t}return __extends(i,e),i.prototype.showScore=function(e){var i=(t.GameContainer.instance_.scoreNum,t.GameContainer.instance_.CrossTimeScore,"本次得分\n"+(t.GameContainer.instance_.scoreNum+t.GameContainer.instance_.CrossTimeScore));this.txt.text=i},i}(egret.Sprite);t.ScorePanel=e,__reflect(e.prototype,"barball.ScorePanel")}(barball||(barball={}));var barball;!function(t){var e=function(t){function e(e,i,r){var n=t.call(this)||this;return n.bmp=new egret.Bitmap(e),i&&(n.bmp.width=i,n.bmp.height=r),n.addChild(n.bmp),n}return __extends(e,t),Object.defineProperty(e.prototype,"CenterX",{get:function(){return this.x+this.bmp.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CenterY",{get:function(){return this.y+this.bmp.height/2},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);t.Star=e,__reflect(e.prototype,"barball.Star")}(barball||(barball={}));var barball;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.bOpenBGM=!0,i.stageW=t.GameContainer.instance_.stage.stageWidth,i.stageH=t.GameContainer.instance_.stage.stageHeight,i.backGround=t.createBitmapByName("BackGround_png"),i.backGround.name="StartPanel backGround",i.addChild(i.backGround),i.backGround.touchEnabled=!0,i.backGround.width=t.GameContainer.instance_.stage.stageWidth,i.backGround.height=t.GameContainer.instance_.stage.stageHeight,i.Logo=t.createBitmapByName("logo_png"),i.Logo.name="Logo",i.Logo.width=1130,i.Logo.height=488,i.Logo.x=(i.stageW-i.Logo.width)/2,i.Logo.y=(i.stageH-i.Logo.height)/2-250,i.addChild(i.Logo),i.btnStart=t.createBitmapByName("btnStart_png"),i.btnStart.name="btnStart",i.btnStart.touchEnabled=!0,i.btnStart.width=573,i.btnStart.height=198,i.btnStart.x=(i.stageW-i.btnStart.width)/2,i.btnStart.y=(i.stageH-i.btnStart.height)/2+300,i.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,i.gameStart,i),i.addChild(i.btnStart),i.btnsound=t.createBitmapByName("sound_png"),i.btnsound.name="btnsound",i.btnsound.width=139,i.btnsound.height=149,i.btnsound.x=70,i.btnsound.y=100,i.btnsound.touchEnabled=!0,i.btnsound.addEventListener(egret.TouchEvent.TOUCH_TAP,i.ChangeBGMState,i),i.addChild(i.btnsound),i.btnrank=t.createBitmapByName("rank_png"),i.btnrank.alpha=.3,i.btnrank.name="btnrank",i.btnrank.width=139,i.btnrank.height=149,i.btnrank.x=170,i.btnrank.y=1550,i.addChild(i.btnrank),i.btnhelp=t.createBitmapByName("help_png"),i.btnhelp.alpha=.3,i.btnhelp.name="btnhelp",i.btnhelp.width=139,i.btnhelp.height=149,i.btnhelp.x=370,i.btnhelp.y=1550,i.addChild(i.btnhelp),i.btnsetting=t.createBitmapByName("setting_png"),i.btnsetting.alpha=.3,i.btnsetting.name="btnsetting",i.btnsetting.width=139,i.btnsetting.height=149,i.btnsetting.x=570,i.btnsetting.y=1550,i.addChild(i.btnsetting),i.btnmore=t.createBitmapByName("more_png"),i.btnmore.name="btnmore",i.btnmore.width=139,i.btnmore.height=149,i.btnmore.x=770,i.btnmore.y=1550,i.btnmore.touchEnabled=!0,i.btnmore.addEventListener(egret.TouchEvent.TOUCH_TAP,i.OpenDeveloperPanel,i),i.addChild(i.btnmore),i
}return __extends(i,e),i.prototype.ChangeBGMState=function(){SoundManager.Instance().PlayBtnEffect(0,1),this.bOpenBGM=!this.bOpenBGM,SoundManager.Instance().ChangeBGMState(this.bOpenBGM)},i.prototype.gameStart=function(e){SoundManager.Instance().PlayBtnEffect(0,1),t.GameContainer.instance_.gameStart()},i.prototype.OpenDeveloperPanel=function(){SoundManager.Instance().PlayBtnEffect(0,1),t.GameContainer.instance_.createDeveloperPanel()},i}(egret.Sprite);t.StartPanel=e,__reflect(e.prototype,"barball.StartPanel")}(barball||(barball={}));var barball;!function(t){function e(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e}var i=function(){function t(){}return t.hitTest=function(t,e){var i=t.getBounds(),r=e.getBounds();return i.x=t.x,i.y=t.y,r.x=e.x,r.y=e.y,i.intersects(r)},t}();t.GameUtil=i,__reflect(i.prototype,"barball.GameUtil"),t.createBitmapByName=e}(barball||(barball={}));